<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="item-category.html">
<link rel="import" href="category-data.html">
<link rel="import" href="progress-dialog.html">
<dom-module id="home-view">
    <template>
        <style include="flaty-bootstrap">
            :host{                
            }

            h1{
                color: black;
            }
            
            iron-list{
                z-index: 0;
            }
            
           .item {
                @apply --layout-horizontal;
                padding: 10px;
                border-radius: 8px;
                background-color: white;
                border: 1px solid #9c27b0;
                max-width: 800px;
                margin: 16px auto 0 auto;
                cursor: pointer;
            }
            
            .header-banner{                    
                width: 100%;
                height: 200px;
                background-color: purple;
                padding-top: 100px;
/*                background-image: url(../../data/images/none.jpg); */
                background-size: cover;              
            }
            
            #image-banner{        
                max-height: 200px;
                max-width: 100%;
            }
            
            .search-field{                
                width: 100%;
                z-index: 2;                 
/*
                align-items: center;
                justify-content: center;
                -webkit-align-items: center;
                -webkit-justify-content: center;
*/
            }  
            
            .search-field paper-input{                          
                border-radius: 10px;
                background-color: white;
            }
        </style>
        
        <category-data
            id="categories-data"
            data="{{categories}}"
            is-ready="{{isReady}}">
        </category-data>

       <div class="container-fluid">
            <div class="header-banner">                
<!--                <iron-image id="image-banner" src="../../data/images/none.jpg"></iron-image>-->
<!--                <iron-image id="image-banner" src="http://lorempixel.com/500/300"></iron-image>-->
                <div class="search-field">
                        <paper-input class="col-12 col-sm-12 col-md-6 col-lg-2 col-xl-4" id="inputSearch" label="Buscar" type="search" on-input="_search" value="{{inputSearch}}">
                            <iron-icon icon="search" slot="suffix"></iron-icon>
                        </paper-input>
                </div>
            </div>                   
            
<!--            <iron-list items="{{categories}}" as="cat"> -->
                   <div class="row">
                    <template is="dom-repeat" items="{{categories}}" as="cat">
                       <div class="col-6" col-md-2>
                        <a on-tap="_setKey" category="[[cat]]" href="/list/[[cat.$key]]/[[cat.name]]">
                            <item-category item={{cat}}></item-category>
                        </a>
                        </div>
                    </template>
                    </div>
<!--            </iron-list>-->
        </div>
        <progress-dialog id="progressDialog" visible={{!isReady}}>
            Carregando Categorias...
        </progress-dialog>
    </template>
    <script>
        class HomeView extends Polymer.Element{
            static get is(){ return 'home-view'}

            static get properties(){
                return{                   
                    itemKey:{
                        type: String,
                        notify: true
                    }
                };
            }
            
            _setKey(e){
                let key = e.currentTarget.category.$key;
                this.itemKey = key;
            }
        }
        window.customElements.define(HomeView.is, HomeView);
    </script>
</dom-module>