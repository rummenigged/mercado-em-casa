<link rel="import" href="../../bower_components/polymer/polymer-element.html">
<link rel="import" href="item-category.html">
<link rel="import" href="category-data.html">
<link rel="import" href="progress-dialog.html">
<dom-module id="home-view">
    <template>
        <style>
            :host{                
            }

            h1{
                color: black;
            }
            
            iron-list{
                z-index: 0;
            }
            
           .item {
                @apply --layout-horizontal;
                padding: 10px;
                border-radius: 8px;
                background-color: white;
                border: 1px solid #9c27b0;
                max-width: 800px;
                margin: 16px auto 0 auto;
                cursor: pointer;
            }
        </style>
        
        <category-data
            id="categories-data"
            data="{{categories}}"
            is-ready="{{isReady}}">
        </category-data>

        <iron-list items="{{categories}}" as="cat">
            <template>
                <a on-tap="_setKey" category="[[cat]]" href="/list/[[cat.$key]]/[[cat.name]]">
                    <item-category item={{cat}}></item-category>
                </a>                    
            </template>                  
        </iron-list>
        
        <progress-dialog id="progressDialog" visible={{!isReady}}>
            Carregando Categorias...
        </progress-dialog>
    </template>
    <script>
        class HomeView extends Polymer.Element{
            static get is(){ return 'home-view'}

            static get properties(){
                return{                   
                    itemKey:{
                        type: String,
                        notify: true
                    }
                };
            }
            
            _setKey(e){
                let key = e.currentTarget.category.$key;
                this.itemKey = key;
            }
        }
        window.customElements.define(HomeView.is, HomeView);
    </script>
</dom-module>